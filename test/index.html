<!DOCTYPE HTML>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
		<title>Geolocation</title>
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js'></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js'></script>
	</head>

	<body>
		<div id="demo"></div>
		
		<script>
			var current = null;
			var previous = null;
			
			getLocation();
			setInterval(recordPosition, 5000);
			
			function getLocation() {
				if (navigator.geolocation) {
					//navigator.geolocation.getCurrentPosition(recordPosition);
					navigator.geolocation.watchPosition(function(crnt){ current = crnt });
				} else {
					x.innerHTML = "Geolocation is not supported by this browser.";
				}
			}

			function recordPosition() {
				if(previous) {
					var distance = Math.sqrt(Math.pow(current.coords.latitude-previous.coords.latitude, 2) + Math.pow(current.coords.longitude-previous.coords.longitude, 2));
					var speed = (distance/5)*360;
					$('#demo').html(
						$('#demo').html()+
						"<br><br><b>Watch read</b>" +
						"<br>Latitude: " + current.coords.latitude + 
						"<br>Longitude: " + current.coords.longitude+
						"<br>Speed: " + speed +
						"<br>Time: " + moment().format('DD/MM/YYYY hh:mm:ss')
					);
				}
				
				previous = {
					coords: {
						latitude: current.coords.latitude,
						longitude: current.coords.longitude
					},
				};
			}
			
		</script>
	</body>
</html>